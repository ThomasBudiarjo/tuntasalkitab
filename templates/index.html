{{define "content"}}
<div class="tracker-card">
  <div class="card-header">
    <label for="month-select">Month:</label>
    <select
      id="month-select"
      name="month"
      class="month-select"
      hx-get="/month"
      hx-target="#month-content"
      hx-swap="innerHTML"
    >
      <option value="1" {{if eq .MonthInfo.Month 1}}selected{{end}}>
        January
      </option>
      <option value="2" {{if eq .MonthInfo.Month 2}}selected{{end}}>
        February
      </option>
      <option value="3" {{if eq .MonthInfo.Month 3}}selected{{end}}>
        March
      </option>
      <option value="4" {{if eq .MonthInfo.Month 4}}selected{{end}}>
        April
      </option>
      <option value="5" {{if eq .MonthInfo.Month 5}}selected{{end}}>May</option>
      <option value="6" {{if eq .MonthInfo.Month 6}}selected{{end}}>
        June
      </option>
      <option value="7" {{if eq .MonthInfo.Month 7}}selected{{end}}>
        July
      </option>
      <option value="8" {{if eq .MonthInfo.Month 8}}selected{{end}}>
        August
      </option>
      <option value="9" {{if eq .MonthInfo.Month 9}}selected{{end}}>
        September
      </option>
      <option value="10" {{if eq .MonthInfo.Month 10}}selected{{end}}>
        October
      </option>
      <option value="11" {{if eq .MonthInfo.Month 11}}selected{{end}}>
        November
      </option>
      <option value="12" {{if eq .MonthInfo.Month 12}}selected{{end}}>
        December
      </option>
    </select>
    <div class="mode-toggle">
      <label class="toggle-switch">
        <input type="checkbox" id="mode-switch" onchange="toggleMode(this)" />
        <span class="toggle-slider"></span>
      </label>
      <span class="toggle-label" id="mode-label">Check</span>
    </div>
  </div>

  <div id="month-content" class="checklist-mode">
    {{template "month_card" .MonthInfo}}
  </div>
</div>

<div class="progress-card">
  <div class="progress-header">
    <span class="progress-text"
      >Progress:
      <strong>{{.CompletedCount}}/365</strong> ({{.ProgressPercent}}%)</span
    >
  </div>
  <div class="progress-bar">
    <div class="progress-fill" style="width: {{.ProgressPercent}}%"></div>
  </div>
</div>

<script>
  function toggleMode(checkbox) {
    var content = document.getElementById("month-content");
    var label = document.getElementById("mode-label");
    if (checkbox.checked) {
      content.classList.remove("checklist-mode");
      content.classList.add("link-mode");
      label.textContent = "Link";
      localStorage.setItem("bibleTrackerMode", "link");
    } else {
      content.classList.remove("link-mode");
      content.classList.add("checklist-mode");
      label.textContent = "Check";
      localStorage.setItem("bibleTrackerMode", "checklist");
    }
  }

  document.addEventListener("DOMContentLoaded", function () {
    var savedMode = localStorage.getItem("bibleTrackerMode");
    var checkbox = document.getElementById("mode-switch");
    if (savedMode === "link") {
      checkbox.checked = true;
      toggleMode(checkbox);
    }
  });
</script>
{{end}}
